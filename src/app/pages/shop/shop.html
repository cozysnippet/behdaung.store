<div class="min-h-screen bg-white">
  <div class="sticky top-[119px] z-10 bg-white/95 backdrop-blur-md border-b border-gray-100 lg:hidden">
    <div class="flex justify-between items-center px-6 py-4">
      <div class="flex flex-col">
        <span class="text-[11px] font-bold text-black font-khmer-body">{{ selectedCategory }}</span>
        <span class="text-[9px] text-gray-400 uppercase tracking-widest">{{ filteredProducts.length }} Products</span>
      </div>
      <button (click)="toggleFilter()" class="text-[11px] font-bold border border-black px-4 py-2 rounded-full font-khmer-body">
        ចម្រាញ់ (Filter)
      </button>
    </div>
  </div>

  <div class="max-w-[1600px] mx-auto px-4 md:px-12 py-8 md:py-16">
    <div class="flex flex-col lg:flex-row gap-12">
      <app-filter-sidebar
        [categories]="categories"
        [activeCategory]="selectedCategory"
        (onSelect)="handleCategorySelect($event)">
      </app-filter-sidebar>

      <main class="flex-grow">
        <div class="grid grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-x-4 md:gap-x-10 gap-y-12">
          @for (product of filteredProducts; track product.id) {
            <app-product-card [product]="product"></app-product-card>
          }
        </div>
      </main>
    </div>
  </div>

  <app-mobile-filter
    *ngIf="isMobileFilterOpen"
    [categories]="categories"
    [activeCategory]="selectedCategory"
    (onSelect)="handleCategorySelect($event)"
    (onClose)="toggleFilter()">
  </app-mobile-filter>
</div>
